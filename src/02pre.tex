%#!platex jou.tex
\chapter{\LaTeX の基本}

\begin{abstract}
% commented out 2006/03/08
%まずは操作方法などの{\LaTeX}の基本を習得しましょう．本書ではあなたが
%\yo{何を書くべきか}ではなく\yo{どうやって書くべきか}ということしか説明
%しないことを始めに断っておきます，当たり前ですが．
まずは操作方法などの{\LaTeX}の基本を説明します．コンピュータの基本操作に
関する部分は大雑把にしか解説していませんので，適宜参考書を参照してくだ
さい．
\end{abstract}

\section{基本の基本}
\latexno{の基本}
\LaTeX は普通のワープロとは違い，ある程度の基本的な前提事項を踏まえなけ
ればなりません．ここでは\LaTeX を操作する上での基本の基本を解説します．


\subsection{処理の流れ}
\latexno{の動かし方}

%コマンドを覚える前にまずは{\LaTeX}での処理の流れを抑えておきましょう．テ
%キストファイルに文章そのものと\K{コマンド}というものを書き，それを
%\LaTeX 処理し，成形結果を確認するといったことを何度か繰り返して最終的な
%版を仕上げます\pp{\figref{latexflow}}．
\Z{コマンド}を覚える前にまずは{\LaTeX}での処理の流れをご覧下さい．
\Z{テキストファイル}に文章そのものと\KY{コマンド}というものを
書き，それを{\LaTeX}処理し，成形結果を確認するといった事を
何度か繰り返して最終的な\Z{版}を仕上げます\pp{\figref{latexflow}}．
\begin{figure}[htbp]
 \begin{center}
  \input{flow}
  \usebox\graph
  \caption{処理の流れ}\figlab{latexflow}
 \end{center}
\end{figure}
ここで\yo{成形}とありますが，{\LaTeX}では元のソースファイルそのものに変
更を加えて\yo{整形}するのではなく，そこから新規に\Z{DVI}ファイルと
いうものを成形するのです \pp{最近は{\LaTeX}ファイルから直接PDFを作るプ
ログラム{\PDFLaTeX}なども存在します．\genzai 日本語化はされていませんが，
将来的には日本語を含む文書でも\PDFLaTeX が主流になると思われます}．

\index{原稿}%
\zindind{原稿}{の編集}%
\zindind{ソースファイル}{の編集}%
\index{編集}%
\indindz{編集}{原稿の}%
\indindz{編集}{ソースファイルの}%
\begin{enumerate}
\item 原稿\pp{ソースファイル}の編集\indindz{ファイル}{ソース}\\
{\LaTeX}を使うためには文章だけではなく，文章の構造や書式を決定する%
{\Z{コマンド}}と呼ばれるものを記述します． この原稿を\KY{ソースファイル}
と呼びます．原稿は\Prog{メモ帳}や\Z{Emacs}などの\Z{テキストエディッタ}で編
集します\pp{\laTEX は直接コンソールからプログラムを呼び出し，文書を執筆
する事も可能です}．\unixos では\Z{コンソール}から次のように入力するとEmacs
が立ち上がると思います．
\begin{InTerm}
   \type{emacs filename.tex &}
\end{InTerm}
Emacsでなくとも，お好きなテキストエディッタや，何らかの\secref{lakulaku}
にあるような執筆環境で良いと思います．これが\figref{latexflow}
の \MARU{1} の矢印に対応します．

\item タイプセット \pp{組版}\\
\latexno{の実行}%
ソースファイルができたらそれを\KY{成形}します．
そのときに使うプログラムは欧文のみの場合は\prog{latex}，
日本語を扱うときは\prog{latex}を日本語化した{platex}です．
%シェルやコマンドプロンプトなどから
\Z{シェル}や\Z{コマンドプロンプト}などの\Z{ターミナル}から，
\begin{InTerm}
   \type{platex filename.tex}
\end{InTerm}
とすれば文書が成形されます．この作業の事を良く\KY{タイプセット}とか
\KY{コンパイル}と言います．これが\figref{latexflow}の \MARU{2} の矢
印に対応します．

\item プレビュー\pp{確認作業}\\
\indindz{文書}{組版後の}%
今度はコンピュータの画面上で成形された結果を見ます．
このとき\fl{filename.tex}そのものが整形されるわけではなく
新たに\fl{filename.dvi}というファイルが
作られます．これが{\LaTeX}による組版後の文書になります．この
組版後の結果をコンピュータ上で確認する作業の事を\KY{プレビュー}する
と言います．
Unix系OSならば
\begin{InTerm}
   \type{xdvi filename.dvi &}
\end{InTerm}
%commented out 2006/03/08
%などとすると良いでしょう．最後のアンパサンド\qu{\texttt{\&}}もあると便利です．
%\prog{dviout}をインストールしたWindowsならばダブルクリック
%するだけで見られるでしょう．これが\figref{latexflow}の
%\MARU{3}の矢印に対応します．
などとすると良いでしょう．最後のアンパサンド\qu{\texttt{\&}}があると
プログラムが\Z{バックグラウンド}で起動しますので便利です．
\prog{\Dviout}をインストールした\Z{Windows}ならば\Z{ダブルクリック}
するだけで見られるでしょう．これが\figref{latexflow}
の \MARU{3} の矢印に対応します．
\end{enumerate}
このような流れがある事を確認して実際に動くかどうかを試して
みましょう．

\subsection{動かしてみる}
インストールが済んでいれば{\LaTeX}が動きます．インストールまで
進んでいないという方は近くの詳しい方に聞いてみてください．
\yo{{\LaTeX}をやりたいんですが}と言い出せば大抵の{\LaTeX}ユーザは親切
に対応してくれると思います．

とりあえず自分のいつも使っているテキストエディッタ\pp{メモ帳やEmacs等}で
以下のようなファイル\Fl{test.tex}を作成してください%
\footnote{無用なトラブルを避けるため，ファイル名には半角英数の文字だけを
使い，可能な限り日本語は使わないようにしてください．}．Windows ユーザの
方はバックスラッシュ`\texttt{\bs}'を円記号`\texttt{\yen}'に読み替えてく
ださい．

\begin{InTeX}
\documentclass{jarticle}
\begin{document}
こんにちは \LaTeX !!
\end{document}
\end{InTeX}

\unixos ならば\prog{Emacs}等で良いでしょう．日本語を
打ち込むためには\prog{Emacs}の場合はまず\prog{Emacs}のウィンドウ下部に
注目してください．ウィンドウの下部の表示には
\begin{quote}
\colorbox{black}%
 {\color{white}\str{[--]J.:------Emacs: test.tex (LaTeX)--[L1--All--------|}}
\end{quote}
となっていると思います．
\index{入力}%
\indindz{入力}{半角}%
\indindz{入力}{英数}%
\indindz{入力}{全角}%
\indindz{入力}{日本語}%
一番右側の \colorbox{black}{\color{white}{\str{[--]}}} と
いう部分が半角入力\pp{英数入力}か全角入力\pp{日本語入力}かの違いを表します．
うえの状態は英数文字の入力ができます．ここで半角・全角の入力を切り替えるため
には\keytop{CTRL}を押しながら\keytop{\yen}を押します．すると
\colorbox{black}{\color{white}{\str{[--]}}}という表示から
\colorbox{black}{\color{white}{\str{[あ]}}}という表示になると思います．
表示は使っている\yo{\Z{かな漢字変換プログラム}}によって若干違うかもしれませ
ん\footnote{\key{Shift,Space}で切り替える場合もあります．}．
\colorbox{black}{\color{white}{\str{[あ]}}}の表示ですと日本語が入力
できる状態です．最近のパソコンと呼ばれるコンピュータには
\keytop{半角/全角}というキーがあり，Windowsの場合はそれで
半角と全角の切り替えを行いますが，Unix系OSは違いますので注意してくださ
い\footnote{比較的新しいと思われる \unixos であれば「全角/半角」入力の切
り替えが \keytop{半角/全角} キーでできる場合もあります．}．詳しくはご自
分のエディッタのマニュアルを見るなどの対応をしてください．


\zindind{Windows}{でのタイプセット}%
次はタイプセット作業\pp{{\LaTeX}処理，またはコンパイル}をします．
Windowsならば \win{スタート} メニューから \win{ファイル名を指定して実行} 
というメニューがあるので，そこに\yo{\str{command}}と入力して
\qu{OK}ボタンを押せばコマンドプロンプトが起動するはずです．
そしてシェル上やコマンドプロンプトでファイルが存在する
ディレクトリ\pp{Windowsの方はフォルダ}に移動して
\begin{InTerm}
   \type{platex test.tex}
\end{InTerm}
として{タイプセット}してください．するとコンソール\pp{端末}には
次のように表示されると思います．

\begin{OutTerm}
This is pTeX, Version 3.14159-p3.1.5 (euc) (Web2C 7.4.5)
(./test.tex
pLaTeX2e <2005/01/04>+0 (based on LaTeX2e <2001/06/01> patch level 0)
(/usr/local/share/texmf/ptex/platex/base/jarticle.cls
Document Class: jarticle 2002/04/09 v1.4 Standard pLaTeX class
(/usr/local/share/texmf/ptex/platex/base/jsize10.clo))
No file test.aux.
[1] (./test.aux) )
Output written on test.dvi (1 page, 236 bytes).
Transcript written on test.log.
\end{OutTerm}

始めに\Z{バージョン情報}を表示\footnote{実
は \TeX のバージョンは \Person{Donald}{Knuth} の思想により3.14159\ldots の様に
$\pi$ に収束するようになっています．}して終わりには\fl{test.dvi}に組版後
のファイルを出力し，処理状況を\fl{test.log}に書き出した事になっていま
す．\fl{test.tex}をタイプセットして出力された\fl{test.log}には
\Z{エラーメッセージ}などの重要な情報が書かれているときがあるので
何か問題が発生したときは眺めてみると良いでしょう．

\begin{Trick}
\laTEX がコンソールに表示するメッセージ（及び\Va{file}{log}）には，
様々な情報が出力されます．丸括弧の後にファイル名があるような場合，
上記の例では \str{(./test.tex} というのは，ファイルが読み込まれている
階層を表しています．内容をもう少し分かりやすく書けば次のようになります．

\begin{InText}
 (./test.tex
   (/usr/local/share/texmf/ptex/platex/base/jarticle.cls
      (/usr/local/share/texmf/ptex/platex/base/jsize10.clo)
   )
   (./test.aux) 
 )
\end{InText}

\Exten*{aux}%
\fl{test.tex}が\fl{jarticle.cls}と\fl{test.aux}を子ファイル，
\fl{jarticle.cls}が\fl{jsize10.clo}を子ファイルとしてファイル読み込み
を行っている事が分かります．

各括弧と数字の場合，例えば`\str{[1]}'はページ番号を表しています．
コンソールに`\str{[}'のような表示で \LaTeX の処理が中断したとすれば，
あるページを組み上げている段階で何らかの問題に遭遇した事を意味します．
\end{Trick}

\zindind{タイプセット}{後の生成ファイル}
タイプセット後にはいくつかのファイルが生成されています．
コンソールから\prog{ls}\pp{Windowsの方は\prog{dir}}コマンドで
\begin{InTerm}
    \type{ls test.*}
\end{InTerm}
とすると，次の四つのファイルが存在する事を確認してください．

\begin{OutTerm}
test.aux test.dvi test.log test.tex
\end{OutTerm}

{\LaTeX}の原稿であるソースファイル\fl{test.tex}をタイプセットしただけで
三つもファイルが生成されました，%これは只事ではありません．
これらのファイルが一般的にどのような役割を持っているのかを説明します．
% commented out 2006/03/08
%\begin{description}
%\zindind{相互参照}{に必要なファイル}%
% \item[\fl{test.aux}] 次回のタイプセットに必要になる\K{中途ファイル}．
%    目次の作成や相互参照をするために必要なファイル．
% \item[\fl{test.dvi}] \fl{test.tex}をタイプセットして出来上がった
%    印刷できる\K{成形ファイル}．DVIファイルと呼ばれる．%
%	    \indindz{ファイル}{DVI}%
% \item[\fl{test.log}] \fl{test.tex}をタイプセットしたときの処理状況や
%    どのような流れで処理をしたのかが書いてある\K{ログファイル}．%
%	    \indindz{ファイル}{ログ}%
% \item[\fl{test.tex}] 先程作成した{\LaTeX}の原稿である%
%	    \K{ソースファイル}． 
%\end{description}
%\end{comment}
\begin{description}
 \item[\normalfont\Va{file}{aux}] 
  \latexno{の中途ファイル}%
  \zindind{相互参照}{に必要なファイル}%
  次回のタイプセットに必要になる\KY{中途ファイル}．
  目次の作成や相互参照をするために必要なファイル．

 \item[\normalfont\Va{file}{dvi}] 
  \zindind{印刷}{できるファイル}%
  \indindz{ファイル}{印刷できる}%
  \indindz{ファイル}{DVI}%
  \Va{file}{tex}をタイプセットして出来上がった\zindind{成形}{ファイル}%
  印刷できる\K{成形ファイル}．\Z{DVI}ファイルと呼ばれる．%

 \item[\normalfont\Va{file}{log}] 
  \latexno{のログファイル}%
  \indindz{ファイル}{ログ}%
  \latexno{処理状況}%
  \Va{file}{tex}をタイプセットしたときの処理状況や
  どのような流れで処理をしたのかが書いてある\KY{ログファイル}．%

 \item[\normalfont\Va{file}{tex}] 
  \latexno{原稿}%
  先程作成した{\LaTeX}の原稿である\KY{ソースファイル}． 
\end{description}



\subsection{原稿作成時の注意点}\seclab{chui}
\zindind{原稿}{作成時の注意}%
これまでの作業ができていれば数式や図表を含まない簡単な文書を
作成できる事でしょう．そして実際に長い文章を打ち込んでみて
ください．ただし10個の半角記号は特殊文字として{\LaTeX}に別の仕事をさせる
ために使いますのでそのまま使う事ができません．

\index{"#@\verb+#+}\glossary{"#@\verb+#+}%
\index{"$@\verb+$+}\glossary{"$@\verb+$+}%
\index{"&@\verb+&+}\glossary{"&@\verb+&+}%
\index{"\@\verb+\+}\glossary{"\@\verb+\+}%
\index{"^@\verb+^+}\glossary{"^@\verb+^+}%
\index{"_@\verb+_+}\glossary{"_@\verb+_+}%
\index{"{1"}@\protect\bgroup\verb+"{+"}}%
\glossary{"{1"}@\protect\bgroup\verb+"{+"}}%
\index{"{2"}@"{\verb+"}+\protect\egroup}%
\glossary{"{2"}@"{\verb+"}+\protect\egroup}%
\index{"~@\verb+~+}%
\glossary{"~@\verb+~+}%
\index{%@\verb+%+}%"
\glossary{%@\verb+%+}%"

\begin{quote}
\verb|# $ % & _ { } ~ ^ \ |
\end{quote}

さらに3個の記号は出力が違う文字記号になります．%"
\index{"|@\texttt{\symbol{'174}}}%"
\index{"<@\verb+<+}%"
\index{">@\verb+>+}%"
\begin{quote}
\str| \str< \str> はそれぞれ --- !` ?`
\end{quote}
となる事でしょう．
以上の13個の記号を文章中で出力するために面倒ですが，
バックスラッシュ\pp{円}記号を補ったり長い命令を打ち込みます．%''"

\glossary{"#@\hspace*{-1.2ex}\verb+"\#+}%"
\glossary{"_@\hspace*{-1.2ex}\verb+"\_+}%"
\glossary{"$@\hspace*{-1.2ex}\verb+"\$+}%"
\glossary{"%@\hspace*{-1.2ex}\verb+"\%+}%"
\glossary{"{1"}@\hspace*{-1.2ex}\protect\bgroup\verb+"\"{+"}}
\glossary{"{2"}@\hspace*{-1.2ex}"{\verb+"\"}+\protect\egroup}
\glossary{"&@"\hspace*{-1.2ex}"\verb+"\"&+}
%"
\index{ナンバー}%
\index{ドル}%
\index{パーセント}%
\index{アンパサンド}%
\index{波括弧}%
%"
%\begin{center}
% \begin{tabular}{cc|cc|cc|cc|cc|cc|cc|cc}
% \# & \verb|\#| & \$ & \verb|\$| & \% & \verb|\%| & \& & \verb|\&| &
% \_ & \verb|\_| & \{ & \verb|\{| & \} & \verb|\}| \\
% \end{tabular}
%\end{center}
\begin{InOut}
\#　\$　\%　\&　\_　\{　\}
\end{InOut}
%
\C*{textasciitilde}\index{チルダ}%
\C*{textasciicircum}\index{ハット}%
\C*{textbackslash}\index{バックスラッシュ}%
\C*{textbar}\index{縦棒}%
\C*{textless}\index{小なり}%
\C*{textgreater}\index{大なり}%
\begin{InOut}
\textasciitilde 　\textasciicircum 　
\textbackslash  　\textbar 　
\textless       　\textgreater
\end{InOut}
%\begin{center}
% \begin{tabular}{cc|cc|ccl}
% \T{textasciitilde} & \T{textasciicircum} & \T{textbackslash}\\
% \T{textbar}        & \T{textless}        & \T{textgreater}\\
% \end{tabular}
%\end{center}

\begin{Prob} 半角文字と全角文字を混在させてある程度の量の文章の
入力をしてください．特殊記号も含めるようにすると良いでしょう．
\end{Prob}


\subsection{フォルダ・ファイルの基本的な操作}

%ディレクトリの移動方法を知らない，フォルダの作り方を知らないという
%方のためにコマンドプロンプトやシェルでの主要なコマンドを紹介します．
%まずWindowsでは\tabref{Windowscommands}などの基本的なコマンドが
%提供されています．
\zindind{ディレクトリ}{の作り方}%
\zindind{フォルダ}{の作り方}%
\Z{ターミナル}上での\Z{ディレクトリ}の移動方法を知らない，
\Z{フォルダ}の作り方を知らないという方のために，
\Z{コマンドプロンプト}や\Z{シェル}での主要な\Z{コマンド}を紹介します．
\zindind{Windows}{でのファイル操作}%
まず{Windows}では\tabref{Windowscommands}などの基本的なコマンドが
提供されています．

\begin{wraptable}[12]{l}{19zw}
\zindind{フォルダ}{の新規作成}%
\zindind{フォルダ}{の移動}%
\zindind{ファイル}{の情報表示}%
\zindind{ファイル}{の名前の変更}%
\zindind{コマンド}{のヘルプの表示}%
 \caption{Windows OSの基本コマンド}\tablab{Windowscommands}
 \begin{tabular}{lll}
 \TR
 \Th{コマンド名} & \Th{意味}             \\ 
 \MR
 \Prog{mkdir} & 新規にフォルダを作成      \\
 \Prog{cd}    & ディレクトリを移動        \\
 \Prog{dir}   & ファイルの情報を表示      \\
 \Prog{move}  & ファイル名を変更したり移動\\
 \Prog{copy}  & ファイルをコピー          \\
 \Prog{del}   & ファイルを削除            \\
 \Prog{help}  & コマンドのヘルプを表示    \\ 
  \BR
 \end{tabular}
\end{wraptable}

それぞれのコマンドの使い方\pp{ヘルプ}は \type{mkdir /?} 等とする事で表示
できます．または \win{スタート} メニューの \win{ヘルプ} からコマンドプロ
ンプトについて調べてみても同様の事ができます．どちらかというとWindows
ヘルプを利用したほうが良いでしょう．

\latexno{の原稿執筆支援}%
\zindind{原稿}{の入力支援}%
コマンドプロンプトなどの操作に慣れていないという方は\secref{basic:lakulaku}を
参照して{\LaTeX}の\Z{入力支援}環境を使うのも良い方法です．

Unix系OSの方はコマンドを覚えなければ%仕事にならないでしょう．
操作に不便を感じると思われますので，日ごろから使うように習慣付けを
すると良いでしょう．
シェルと言っても何種類かありますし，シェルに関しては1冊の本になる
くらい奥の深いものなので詳細はそれらに譲ります．ここでは基本的な
ファイル操作のコマンドだけを\tabref{shcommands}に紹介します．
\indindz{ヘルプ}{簡易の}%
それぞれのコマンドの簡単なヘルプが見たいときは
\begin{InTerm}
   \type{mkdir --help | less}
\end{InTerm}
のようにすると\Prog{less}がページを整形します．\par
\begin{wraptable}[10]{r}{23zw}
\zindind{ディレクトリ}{の新規作成}%
\zindind{ディレクトリ}{の移動}%
\zindind{コマンド}{の情報表示}%
\indindz{コマンド}{内部}%
 \caption{Unix系OSの基本コマンド}\tablab{shcommands}
 \begin{tabular}{lll}  
  \TR
  \Th{コマンド名} & \Th{意味}            \\ 
  \MR
 \Prog{mkdir} & 新規にフォルダを作成      \\
 \Prog{cd}    & ディレクトリを移動        \\
 \Prog{ls}    & ファイルの情報を表示      \\
 \Prog{mv}    & ファイル名を変更したり移動\\
 \Prog{cp}    & ファイルをコピー          \\
 \Prog{rm}    & ファイルを削除            \\
 \Prog{help}  & 内部コマンドのヘルプを表示\\
 \Prog{man}   & コマンドのヘルプを表示    \\
 \BR
 \end{tabular}
\end{wraptable}
もう少し詳しいヘルプが見たいときは
\begin{InTerm}
   \type{man mkdir}
\end{InTerm}
とします．もっと詳しいヘルプが見たいときは
\begin{InTerm}
   \type{info mkdir}
\end{InTerm}
のようにすると\Prog{info}がページを整形します．
\prog{less}や\prog{info}の操作方法は若干癖がありますので慣れるまで
時間がかかるかもしれません．Unix系OSの基本的な操作方法，正規表現，
プロセス，ファイル・ディレクトリの概念などについては\appref{info}
の参考資料を参照してください．Unix系OSならば
\begin{InTerm}
   \type{emacs file.tex &}
   \type{platex file.tex}
   \type{xdvi file.dvi &}
\end{InTerm}
の三つの操作ができればなんとかなります．本書ではUnix系OSの
基本ツールなどまで詳しく解説しないのでご自分で調べてみてください．

\zindind{コマンド}{ラインオプション}%
コマンドに対してシェル上で一緒に渡す文字列の事を\KY{引数}
と呼びます．そして多くのコマンドは\K{{コマンドラインオプション}}
といってハイフン\qu{\str{-}}かハイフンが二つ\qu{\str-\str-}で始まる
引数を特別なスイッチとして扱います．このスイッチによってそのコマン
ドは挙動を変えます．それぞれのコマンドでどのようなコマンドラインオ
プションが使えるのかは各プログラムのヘルプを調べます．
\indindz{引数}{ハイフンで始まる}%

\begin{Prob} 以下の作業をコンソール上から行ってください．
Windowsの方は\prog{mv}を\prog{move}に，\prog{ls}を\prog{dir}
に，スラッシュ\qu{\str/}を円\qu{\texttt{\yen}}と置き換えてください．
\begin{InTerm}
  \type{echo message1 >> file.txt}
  \type{echo message2 >> file.txt}
  \type{mkdir anydir}
  \type{cd anydir}
  \type{mv ../file.txt ./}
  \type{ls}
  \type{more file.txt}
  \type{ls ../}
%\begin{comment}[2006/03/08 23:25:46]
%   \type{echo hogehoge \str>\str> hoge.txt}
%   \type{echo gehogeho \str>\str> hoge.txt}
%   \type{mkdir geho}
%   \type{cd geho}
%   \type{mv ../hoge.txt ./}
%   \type{ls}
%   \type{more ./hoge.txt}
%   \type{ls ../}
%\end{comment}
\end{InTerm} 
上記の操作はどのような結果をもたらしたと考えられるでしょうか．
%\begin{comment}[2006/03/08 23:25:46]
%新規にディレクトリ\fl{geho}を作成し，現在のディレクトリに
%存在していたファイル\fl{hoge.txt}を\fl{geho}ディレクトリに
%移動したと考えられるでしょう．最後の操作でうえの階層の
%ディレクトリに\fl{hoge.txt}がないことでそれを確認できます．
%\end{comment}
新規にディレクトリ\fl{anydir}を作成し，現在のディレクトリ%
\indindz{ディレクトリ}{カレント}%
（\Z{カレントディレクトリ}）に存在していたファイル
\fl{file.txt}を\fl{anydir}ディレクトリに移動したと
考えられるでしょう．最後の操作でうえの階層のディレクトリ%
\indindz{ディレクトリ}{親}%
（\Z{親ディレクトリ}）に\fl{file.txt}がない事でそれを確認できます．
\end{Prob}

\subsection{エラーに遭遇する}
\latexno{のエラー}%
{\LaTeX}処理をしていると\Z{エラー}に悩まされるかもしれません．{\LaTeX}
は文章中にコマンドなどに関するエラーを発見するとそこで処理を中断
します．処理を中断するとユーザにどうすれば良いかを促します．
このとき端末には\Z{疑問符}\qu{\str?}が表示されます．

% commented out 2005/xx/xx
%そうして，エラーに対してどの処理をすれば良いのかをユーザ
%に促すします．エラーを出さないコツは，一気に文
%書を書き上げるのではなく，こまめに{\LaTeX}処理を途中で実行すること
%です．こうすると，修正が容易になります．

%\qu{?}と表示されることが良くあります．これは文法上の誤りで，タイプミス
%などが考えられます．処理を強制終了するために，\keytop{X}を押してく
%ださい．それでもだめなときは\keytop{CTRL}を押しながら\keytop{C}か
%\keytop{D}を押してください．これで終了できます．間違いのある行番号
%を表示しますので，そのあたりで怪しそうな箇所を探します．たいていは
%括弧の数が足りないとか，スペルが間違っているなどの単純なものです．

\begin{Exe} まずは以下のソースファイル\Fl{errortest.tex}を作成し
てください．

\begin{InTeX}
\documentclass{jarticle}
\begin{document}
Hello & Goodbye! Give me $100! Give me 100%!
Under_bar is stranger. Is sharp sing #?
No its' \#. Hello \& Goodbye!! 
\end{document} 
\end{InTeX}

%次にこのファイルをタイプセットしてください．すると端末には
次に\fl{error.tex}を\type{platex error}でタイプセットしてください．
するとターミナルには次のように表示されるでしょう．
\index{Misplaced alignment tab character@\texttt{Misplaced alignment tab character \&}}%
\index{エラー!Misplaced alignment tab character@\texttt{Misplaced alignment tab character \&}}%

\begin{OutTerm}
! Misplaced alignment tab character  &.
1.3 Hello & 
            Goodbye! Give me $100! Give me 100%|
?
\end{OutTerm}

最後の行に疑問符\qu{\str?}が表示されています．この状態はユーザに何らかの
操作を促している状態です．どうやら3行目でアンパサンド\qu{\texttt\&}を不正に使っ
ていると言われています．ここで\keytop{Enter}キーを押すとさらに次のように
表示されます．

\index{You can't use `macro parameter character'@\texttt{You can't use
 `macro parameter character \#'}}%
\index{エラー!You can't use `macro parameter character@\texttt{You can't use
 `macro parameter character \#'}}%
\begin{OutTerm}
! You can't use `macro parameter character #' in math mode.
l.4 Under_bar is stranger. Is sharp sing #
? 
\end{OutTerm}

シャープ\qu{\texttt\#}も間違った使い方をしていると指摘されました．
極め付けにもう1度\keytop{Enter}キーを押すと次のような表示になります．%

\index{"$@\verb+$+}\glossary{"$@\verb+$+}%
\index{Missing $ inserted@\texttt{Missing \$ inserted}}%
\index{エラー!Missing $ inserted@\texttt{Missing \$ inserted}}%
\begin{OutTerm}
! Missing $ inserted.
<inserted text>
                $
l.6 \end{document}
? 
\end{OutTerm}

今度はドル\qu{\texttt\$}を
不正に使ったと言われました．以上の事から3行目から
6行目にかけて半角記号の使い方が間違っている事が分
かりました．ソースファイルをもう1度確認し，どこが
どう違うのかを判別し修正してください．

修正後のファイルは以下のようになるでしょう．

\begin{InTeX}
Hello \& Goodbye! Give me \$100! Give me 100%!
Under_bar is stranger. Is sharp sing \#?
No its' \#. Hello \& Goodbye!!  
\end{InTeX}

3行目のアンパサンド\qu{\texttt\&}とドル\qu{\texttt\$}と
4行目のシャープ\qu{\texttt\#}にバックスラッシュ\qu{\texttt{\bs}}を
付けます．これを再びタイプセットしてみてください．

\begin{OutTerm}
! Missing $ inserted.
<inserted text>  $
l.4 Under_
          bar is stranger. Is sharp sing \#?
? 
\end{OutTerm}

\zindind{改行}{された表示}%
今度はドル\qu{\texttt\$}の書き忘れがあると言われています．
4行目のエラーメッセージで丁度アンダーバー\qu{\texttt\_}
の部分で表示が改行されていますから，この部分に
間違いがある事が分かります．どうやらアンダーバーは
ドル\qu{\texttt\$}などと同じようにバックスラッシュが必要なようです．
ここでとりあえず\keytop{Enter}キーを押してタイプセットを
終了してください．一つ目のエラーが表示されます．

\begin{OutTerm}
! Missing $ inserted.
<inserted text>  $
l.6 \end{document}
?
\end{OutTerm}

タイプセットは中断しませんが，何か煩雑な表示が出現します．%$

\begin{OutTerm}
Overfull \hbox (152.35132pt too wide) in paragraph at lines 3--6
[]\OT1/cmr/m/n/10 Hello & Good-bye! Give me $100! Give me 
100Under$[]\OML/cmm/m/it/10 arisstranger:Issharpsing
\OT1/cmr/m/n/10 #?\OML/cmm/m/it/10 Noits[]\OT1/cmr/m/n/10 #
\OML/cmm/m/it/10 :Hello\OT1/cmr/m/n/10 &\OML/cmm/m/it/10 
Goodbye\OT1/cmr/m/n/10 !!$ 
\end{OutTerm}

% commented out 2006/03/08
%というごちゃごちゃした表示がでます．これは\dos{Overfull \bs hbox}
%という\K{警告}であることが分かります．次に成形後のDVIファイル
%\fl{errortest.dvi}をプレビューしてください．すると行がページ
%をはみ出しています．先程のアンダーバーに関するエラーにおいて
これは \dos{Overfull \bs hbox}
という\KY{警告}である事が分かります．次に成形後のDVIファイル
\fl{error.dvi}をプレビューしてください．すると行がページ
をはみ出しています．先程のアンダーバーに関するエラーにおいて
次のような表示がありました．

\begin{OutTerm}
<inserted text>  $
\end{OutTerm}

どうやら{\LaTeX}は自動的に%$
ドル\qu{\texttt\$}を挿入したようです．\qu{b}という文字が\qu{r}の
下付きの添え字になっています．さらに\qu{Give me 100Under$_b$}
となっており入力されたパーセント\qu{\texttt\%}と
感嘆符\qu{\texttt!}が出力されておらず，次の行の
\qu{Under}とくっついています．
% commented out 2006/03/08
%どうやら先程のごちゃごちゃ
%した警告はこの行がページをはみ出していることを言っている
%ようです．ですからファイル\fl{errortest.tex}はさらに次のよう
%に修正されます．
\indindz{警告}{煩雑な}%
どうやら先程の煩雑な警告はこの行がページをはみ出して
いる事を意味しているようです．
ですからファイル\Fl{errortest.tex}はさらに次のよう
に修正する事になります．

\begin{InTeX}
Hello \& Goodbye! Give me \$100! Give me 100\%!
Under\_bar is stranger. Is sharp sing \#?
No its' \#. Hello \& Goodbye!!   
\end{InTeX}

これで望み通りうまくいきそうです．実際に上記のファイルを
タイプセットし，その結果を吟味してください．
\end{Exe}

% commented out on 2006/03/08 
%{\LaTeX}の原稿をタイプセットしたときに端末に疑問符\qu{\str?}
%が表示されて処理が中断しますが，この段階でこちらも疑問符\qu{\str?}
%で返事を返すと
\zindind{処理}{の中断}%
{\LaTeX}の原稿をタイプセットしたときに端末に\Z{疑問符}\qu{\str?}
が表示されて処理が中断しますが，この段階でこちらも疑問符\qu{\str?}
で返事を返すと次のように表示されます．

\begin{OutTerm}
Type <return> to proceed, S to scroll future error messages,
R to run without stopping, Q to run quietly,
I to insert something, E to edit your file,
1 or ... or 9 to ignore the next 1 to 9 tokens of input,
H for help, X to quit.
? 
\end{OutTerm}

疑問符\qu{\str?}が表示されている段階で
上記に挙げるようなキーの入力をすると何らかの対処が
できるようです．
\begin{description}
 \item[\keytop{Enter}] 
   エラーに対して{\LaTeX}が適当な対処をした後にタイプ
   セットを続行します．
 \item[\keytop{S}] \keytop{Enter}キーを押し続けた
事と同じ動作をします．
 \item[\keytop{R}] エラーが検出されても停止せずに
ノンストップでタイプセットします． 
 \item[\keytop{Q}] \keytop{Q}を押した場合は
\KY{バッチモード}に入り処理が続きます． 
 \item[\keytop{I} \va{文字列}]  文字列を挿入してタイ
プセットを続けます．元の原稿に修正は加えられません．
 \item[\keytop{H}] そのエラーに対する英語のヘルプを
端末に表示します．
 \item[\keytop{X}] ゲームを終了します． 
\end{description}

\zindind{括弧}{の足りない状態}%
\keytop{X}キーは余り押してはいけません．括弧が足りない
というエラーの場合はとりあえず\keytop{Enter}キーを
押せばそのまま処理を続行できます．

タイプセットをしてアスタリスク\qu{\str{*}}が表示されて
処理が中断するときがあります．\keytop{Enter}キーを
押しても同じメッセージが表示されてどうにも
ならなくなります．\index{*@\verb+*+}%"

\begin{OutTerm}
*
(Please type a command or say `\end')
\end{OutTerm}

この場合コンソールから`\verb|\end{document}|'と入力して処
理が終了しなかった場合は強制的にプログラムを終了してください．ソース中で
何かミスをしていると思われます\footnote{慣れないうちはどこに記述間違いが
あるのかを見つけるのが難しいと思われますから，適当な場所に分かりやすいよ
うに\Z{ブレイクポイント}（タイプセットが停止する地点）を設けるのも手だと思い
ます．}．

\subsection{プレビューアの操作}
%commented out 2006/03/08
%プレビューを行うプログラムのことを\KY{プレビューア}と言います．
%OSによって使用可能なプレビューアが異なります．Windowsならば
%\Hito{大島}{利雄}の\Prog{dviout}，\unixos ならば\Prog{xdvi}，
%Red Hatならば\Prog{pxdvi}などを使い\fl{hoge.dvi}を各アプリケー
%ションで開きます．Windowsの場合は\prog{dviout}に関する豊富な
%ヘルプやマニュアルが用意されているのでそちらを読んでみてください．
%ここではUnix系OSで広く使われている\prog{xdvi}を例に操作方法を
%説明します．まずシェル上で\fl{hoge.dvi}の存在するディレクトリに
%移動し，\prog{xdvi}に対してファイル名を指定し，
\zindind{Windows}{のプレビューア}%
プレビューを行うプログラムの事を\KY{プレビューア}と言います．
OSによって使用可能なプレビューアが異なります．
\indindz{プレビュー}{Windowsでの}%
Windowsならば\Hito{大島}{利雄}の\Prog[dviout]{\Dviout}，
\indindz{プレビュー}{Unix系OSでの}%
\unixos ならば\Prog{xdvi}，
\indindz{プレビュー}{Red Hatでの}%
\Z{Red Hat}又は\Z{Fedora Core}ならば\Prog{pxdvi}などを使い
\Va{file}{dvi}を各アプリケーションで開きます．
Windowsの場合は\prog{\Dviout}に関する豊富なヘルプやマニュアルが
用意されているのでそちらを読んでみてください．
ここでは\unixos で広く使われている\prog{xdvi}を例に操作方法を
説明します．まずターミナル上で\Va{file}{dvi}の存在するディレクトリに
移動し，\prog{xdvi}に対してファイル名を指定し，
\begin{InTerm}
   \type{xdvi }\Va{file}{dvi} \str &
\end{InTerm}
のようにします．Unix系OSならばアンパサンド\qu{\texttt\&}をつけて
\KY{バックグラウンド}で起動します．%\pp{\figref{xdvisample}}
こうするとタイプセットを再度したときに自動的にDVIファイルを
再表示します．\Dviout でも同様の再表示機能があります．
%\begin{figure}[hbtp]
% \begin{center}
%  \includegraphics[bb={0 0 875 701},scale=.4]{images/xdvi}
%  \caption{{xdvi}の起動例}\figlab{xdvisample}
% \end{center}
%\end{figure}

\prog{xdvi}の基本的な操作方法を説明します．右側に枠で囲まれた
文字がボタンになっています．ボタンのように見えませんが一応押せます．
さらにボタンの右側にはページ番号があり，ページ番号をクリックすると
該当するページを表示します．

\prog{xdvi}でのマウスのクリックは拡大の機能を持っています．それぞれ
\begin{namelist}{中央クリック}
 \item[左クリック]   少し拡大．
 \item[中央クリック] 普通に拡大．
 \item[右クリック]   かなり拡大．
\end{namelist}
となっています．また，右側にある\qu{\str{Quit}}とか\qu{\str{Abort}}などは
ボタンで，主なボタンの機能は以下のとおりとです．
\begin{namelist}{View PS}
\item[\str{Quit}]
	    xdviを終了する．
\item[\str{Reread}]
	    一度読み込んだファイル\Va{file}{dvi}を再描画する．
\item[\str{First}]
	    先頭ページに移動する．
\item[\str{Prev}]
	    前ページに移動する．
\item[\str{Next}]
	    次ページに移動する．
\item[\str{Last}]
	    最終ページに移動する． 
\item[\str{View PS}]
	    {\PS}ファイルを見る．
\item[\str{File}]
	    DVIファイルを別に開く．
\end{namelist}

終了するには\qu{\str{Quit}}ボタンを押します． 


%\subsection{ちょっと休憩}
\begin{Trick}

これまで操作して少し疲れたでしょうから，ここで休憩をしましょう．
DVIファイルと言われてもなじみの薄いファイル形式かもしれません．
そこでこのDVIファイルを別のファイル形式に変換してみましょう．

例えば\PS に変換するには\pp{Windowsの方は\prog{dvipsk}}
\begin{InTerm}
  \type{dvips -o test.ps test.dvi}
\end{InTerm}
とすると\fl{test.dvi}から\fl{test.ps}が生成されます．この\fl{test.ps}を
\begin{InTerm}
  \type{ps2pdf test.ps test.pdf}
\end{InTerm}
としてPDFファイル\fl{test.pdf}を生成する事もできます．Postscript
ファイル\fl{test.ps}をプリンタに出力するには
\begin{InTerm}
  \type{lpr -P} \va{プリンタ名} \fl{test.ps}
\end{InTerm}
とする事で印刷要求を送信できます．\va{プリンタ名}については
システムの管理者に聞くなどしてください．

タイプセット時に拡張子\exten{tex}を省略して
\begin{InTerm}
  \type{platex test}
\end{InTerm}
としてみてください．以上のような例でも{\LaTeX}プログラムは
\fl{test.tex}を探し出してタイプセットしてくれるでしょう．

これは \LaTeX で使われているファイル検索の仕組みに関係しています．
\LaTeX では \Prog{Kpathsearch}というファイル検索機構を採用しています．
まず上記の例では\fl{test.tex}があるときに \type{platex test} とすると
\prog{Kpathsearch}が自動的に拡張子をつけてファイルを探します．
この時どのディレクトリ\pp{フォルダ}から探し出すかという情報が必要になりま
す．この情報が記載されたファイルは\Fl{texmf.cnf}というファイルです．
ほとんどの環境でディレクトリ \fl{\$texmf/web2c/} 以下にあります．%
\index{"$texmf@\texttt{\$texmf}}%
\index{ファイル!"$texmf@\texttt{\$texmf}}%
ここで \fl{\$texmf} は{\LaTeX}のファイルを格納すべき一番上のディレクトリを
示します．Unix系OSならば \fl{/usr/local/share/texmf/} 
などだったりWindowsならば \fl{C:\yen usr\yen local\yen share\yen 
texmf\yen} だったりするでしょう．
\begin{InTerm}
  \type{kpsewhich texmf.cnf}
\end{InTerm}
とすると，どこに\fl{texmf.cnf}が存在するのかが分かります．
\end{Trick}

\begin{Trick}
最近の \LaTeX プログラムは\prog{Kpathsearch}に対応しているので
何も意識しなくても適切に設定ファイルやクラスファイルなどを検索
してくれます．しかし手動で検索したいときもあると思います．
このような場合は\Prog{kpsewhich}というプログラムを使って
  \type{less `kpsewhich  book.cls`}
とすると\Fl{book.cls}というファイルが\fl{\$texmf}以下の
特定のディレクトリから検索され，\Prog{less}がファイルを
整形します．実はKpathsearch ではプログラム毎にファイルを
検索する場所を指定できます．そのため，\Fl{jarticle.cls}
というファイルを\type{kpsewhich jarticle.cls}としただけで
は検索結果に表示されません．\copt{-progname}というコマンドライン
オプションを付けて\type{kpsewhich -progname=platex jarticle.cls}
と実行すると，\pLaTeX が \Fl{jarticle.cls} というファイルを
見つけられる事になります．これにより複数のプログラムで同じ名前のファイル
名が存在しても，ディレクトリを変えておけば衝突しませんし，ファイルを検索
するディレクトリが少なくて済みますので処理速度が向上します．
\end{Trick}



\subsection{コマンド}

\zindind{原稿}{の構成}%
\zindind{原稿}{の先頭部分}%
{\LaTeX}では原稿を三つのパートに分割する事ができます．
それに伴いいくつかのコマンドは，特定のパートでしか使用
できません．
\begin{Syntax}
\verb|原稿先頭部分 (イニシャルコマンドを記述)|\\
\cmd{documentclass}\opa{オプション,$\ldots$}%
	\pa{クラス}\opa{リリース}\\
\va{前書き部分} (プリアンブルコマンドを記述)\\
\verb|\begin{document}|\\
\va{本文} (ボディ)\\
\verb|\end{document}|
\end{Syntax}
この中で \Cmd{documentclass}，\Env{document}環境は必須であり，
絶対に必要な記述です．

\indindz{コマンド}{イニシャル}\indindz{コマンド}{プリアンブル}%
\zindind{プリアンブル}{コマンド}%
原稿先頭\pp{イニシャル}部分には\KY{イニシャルコマンド}と
呼ばれるコマンドを記述する事ができ，
同じように前書き\pp{プリアンブル}部分には%
\K{プリアンブルコマンド}や定義などを
記述する事ができます．そして，\env{document}環境
によって挟まれた本文部分にはコマンドの定義や組版用のコマンドを
記述します．それぞれのコマンドは定められた場所で使うように
決められています．ユーザがプリアンブルコマンドを本文で使う事が
できないように{\LaTeX}の内部で細工が施されています．

ここで言葉の定義をしましょう．コマンド，命令，環境，引数，オプションなど
の言葉を混同しがちですが，\K{本書では}以下のように取り決めます
\footnote{コマンドについての説明としては不十分なのですが，今は命令と環境
があると解釈してください．}．

\begin{description}%{コマンド}
\item[\Z{コマンド}] 
  \indindz{記号}{円}%
   \Z{バックスラッシュ}%
   \pp{Windowsの方は\Z{円記号}}と共に用いられる文字列．
   \begin{description}%{命令}
    \item[\Z{命令}]
       単独で使用するコマンド．
       引数を取る事ができる．
    \begin{quote}例：\verb|\alpha|，\verb|\maketitle|
          \end{quote}
    \item[\Z{環境}] 
       \qu{\C{begin}\pa{何々}}と
       \qu{\C{end}\pa{何々}}で囲まれている
     領域，またはそれを囲むためのコマンド．
       引数を取ることができる．
     \begin{quote}例：\verb|\begin{center}| \va{文字列} \verb|\end{center}|
    \end{quote}
   \end{description}
 \item[\Z{引数}] 
\zindind{コマンド}{の引数}%
\indindz{引数}{コマンドの}%
   コマンドに受け渡す文字列．
   \begin{description}%{必須引数}
    \item[\Z{必須引数}] 
\indindz{引数}{波括弧で挟まれた}%
\indindz{引数}{必須の}%
\zindind{波括弧}{で囲まれた引数}%
\zindind{波括弧}{の役割}%
       {波括弧}\qu{\texttt{\char'173~\char'175}}で囲まれた要素．
       コマンドが必須引数を取るときは必ず受け渡す．
           \begin{quote}例：\verb|\section|\pa{見出し語}\end{quote}
   \item[\Z{任意引数}] 
\indindz{引数}{角括弧で挟まれた}%
\indindz{引数}{任意の}%
\zindind{角括弧}{で囲まれた引数}%
       オプションとも言う．\Z{角括弧}\qu{\texttt{[~]}}で囲まれた要素．
       コマンドが任意引数を取るときは任意に受け渡す．
          \begin{quote}例：\verb|\documentclass|\opa{任意引数}\pa{クラス名}
    \end{quote}
   \end{description}
\end{description}
% commented out 2006/03/09 
%\begin{description}%{コマンド}
%\item[\Z{コマンド}] 
%	   \Z{バックスラッシュ}%
%	   \pp{Windowsの方は\Z{円記号}}と共に用いられる文字列．
%	   \begin{description}%{命令}
%	    \item[\Z{命令}]
%		       単独で使用するコマンド．
%		       引数を取ることができる．
%	    \begin{quote}例：\verb|\alpha|，\verb|\maketitle|
%            \end{quote}
%	    \item[\Z{環境}] 
%		       \qu{\Cmd{begin}\pa{なんとか}}と
%		       \qu{\Cmd{end}\pa{なんとか}}で囲まれている
%		       領域，またはそれを囲むためのコマンド．
%		       引数を取ることができる．
%            \begin{quote}例：\verb|\begin{center}文字列\end{center}|
%	    \end{quote}
%	   \end{description}
% \item[\Z{引数}] 
%	   コマンドに受け渡す文字列．
%	   \begin{description}%{必須引数}
%	    \item[\Z{必須引数}] 
%		       波括弧\qu{\texttt{\{\}}}で囲まれた要素．
%		       コマンドが必須引数をとるときは必ず受け渡す．
%            \begin{quote}例：\verb|\section{引数}|\end{quote}
%	    \item[\Z{任意引数}] 
%		       オプションとも言う．角括弧\qu{\texttt{[]}}で囲まれた要素．
%		       コマンドが任意引数をとるときは任意に受け渡す．
%            \begin{quote}例：\verb|\documentclass[任意引数]{jbook}|
%	    \end{quote}
%	   \end{description}
%\end{description}


\subsection{括弧について}

%さて，{\LaTeX}の基本を知った所で\KY{括弧}に
%ついての取決めをしたいと思います．括弧については色々な呼
%び方があるようですが，誤解を避けるために\K{本書では}
%以下のように定義します．
%\begin{description}
% \item[\Z{かぎ括弧} \qu{「」}] 
%	    引用や会話文などに使う．
% \item[\Z{2重かぎ括弧} \qu{『』}] 
%	    書名，引用の中の引用などに使う．
% \item[\Z{引用符} \qu{‘’}] シングルクオートとも言う．左側に
%	    あるほうを左シングルクオート，右側にあるほうを
%	    右シングルクオートと言う．引用に使う．
% \item[\Z{2重引用符} \qu{“”}] 
%	    ダブルクオートとも言う．左側にあるほうを左ダブルクオート，
%	    右側にあるほうを右ダブルクオートという．
%	    長い引用に使う．
% \item[\Z{丸括弧} \qu{（）}] 小括弧，パーレンとも言う．
%	    語句の補足説明に使う．
% \item[\Z{波括弧} \qu{｛｝}] 中括弧とも言う．
%	    コマンドに対して必須引数を渡すのに
%	    使われたり，要素を一つのグループにまとめるために
%	    使う．
% \item[\Z{角括弧} \qu{［］}] 大括弧とも言う．
%	    コマンドに対して任意引数を渡すときに使う．
% \item[\Z{山括弧} \qu{＜＞}] 
%	    この括弧に囲まれた文字列は何か別の文字列に
%	    書き換えられる．例えば，\va{ファイル名}などがあれば，
%	    これは任意の文字列\fl{filename.tex}，
%	    \fl{test.foo}などに置き換えられる．
%\end{description}
%ここで引用符と言うのが登場しましたが，欧文の引用符は
%シングルクオート\pp{`'}であり，和文の引用符はかぎ括弧\pp{「」}と
%なります．二つを区別するために欧文用のものを
%\K{シングルクオート}，和文のものを\K{かぎ括弧}と言う
%ことにします．文中に出てくる引用符という言葉は
%そのどちらも示すことになります．
さて，{\LaTeX}の基本を知った所で\KY{括弧}に
ついての取決めをしたいと思います．括弧については色々な呼
び方があるようですが，誤解を避けるために\K{この冊子では}
以下のように定義します．
\begin{description}
 \item[\Z{かぎ括弧}---「~」] 
	    \Z{引用}や\Z{会話文}などに使う．
 \item[\Z{二重かぎ括弧}---『~』] 
	    \Z{書名}，引用の中の引用などに使う．
 \item[\Z{引用符}---‘~’] シングルクオートとも言う．左側に
	    あるほうを左シングルクオート，右側にあるほうを
	    右シングルクオートと言う．引用に使う．
 \item[\Z{二重引用符}---“~”] 
	    ダブルクオートとも言う．左側にあるほうを左ダブルクオート，
	    右側にあるほうを右ダブルクオートという．
	    長い引用に使う．
 \item[\Z{丸括弧}---（~）] \Z{小括弧}，\Z{パーレン}とも言う．
	    語句の\Z{補足説明}に使う．
 \item[\Z{波括弧}---｛~｝] \Z{中括弧}とも言う．
	    コマンドに対して必須引数を渡すのに
	    使われたり，要素を一つのグループにまとめるために
	    使う．
 \item[\Z{角括弧}---［~］] \Z{大括弧}とも言う．
	    コマンドに対して任意引数を渡すときに使う．
 \item[\Z{山括弧}---＜~＞] 
	    この括弧に囲まれた文字列は何か別の文字列に
	    書き換えられる．例えば，\va{ファイル名}などがあれば，
	    これは任意の文字列\fl{file.tex}，
	    \fl{input.foo}，\fl{output.bar}などに置き換えられる．
\end{description}
\indindz{引用符}{欧文の}%
\indindz{引用符}{和文の}%
\zindind{欧文}{の引用符}%
\zindind{和文}{の引用符}%
ここで\Z{引用符}と言うのが登場しましたが，欧文の引用符は
シングルクオート\pp{`~'}であり，和文の引用符はかぎ括弧\pp{「~」}と
なります．二つを区別するために欧文用のものを
\KY{シングルクオート}，和文のものを\KY{かぎ括弧}と言う
ことにします．文中に出てくる引用符という言葉は
そのどちらも示すことになります．


\section{{\protect\LaTeX}に関わるファイル形式}
タイプセット時に作成される中途ファイル以外にも{\LaTeX}では多く
のファイル形式が存在することを経験するでしょう．一般にファイ
ル形式は\KY{拡張子}によって種類を識別します．

\begin{Syntax}
\Va{ファイル名}{拡張子}
\end{Syntax}

上記のようにピリオドの後の文字で区別されます．

パッケージをインストールするときに見かけるものは以下の通りです．
\begin{namelist}{xxxx}
%\item[\Exten{dtx}] パッケージ化されたマクロ．複数のクラス
%\Va{クラス1}{cls}，\Va{クラス2}{cls},\ldots\, \Va{クラスn}{cls}が
%\Va{クラス}{dtx}中にまとまっていることも多い．または
%\Va{マクロ}{sty}が複数まとまっているときもある．
%\item[\Exten{ins}] パッケージ化されたマクロを
%    取り出すためのファイル．\Va{classes}{dtx}と
%    ともに配布されている．
%\item[\Exten{sty}] 便利な機能をうまくまとめたもの．
%    \emph{マクロ}，\emph{マクロパッケージ}，\emph{パッケージ}，
%    \emph{スタイルファイル}\pp{ちと古い言い方}とも言う．
%\item[\Exten{cls}] 原稿の書式を決定するファイル．
%    \emph{クラス}，\emph{クラスファイル}，\emph{文書クラスファイル}，
%    \emph{ドキュメントクラスファイル}とも言う．
%\item[\Exten{clo}] クラスのオプションに応じた設定を記述したファイル．
%\item[\Exten{fd}]  フォントの属性を定義したファイル．ユーザが意識して
%		    使うことはない．
\indindz{マクロ}{パッケージ化された}%
\item[\Exten{dtx}] パッケージ化されたマクロ．複数のクラス
\Va{クラス1}{cls}，\Va{クラス2}{cls},\ldots\, \Va{クラスn}{cls}が
\Va{クラス}{dtx}中にまとまっていることも多い．または
\Va{マクロ}{sty}が複数まとまっているときもある．
\item[\Exten{ins}] パッケージ化されたマクロを
    取り出すためのファイル．\Va{classes}{dtx}と
    ともに配布されている．
\item[\Exten{sty}] 便利な機能をうまくまとめたもの．
    \KY{マクロ}，\KY{マクロパッケージ}，\KY{パッケージ}，
    \KY{スタイルファイル}とも言う．
\item[\Exten{cls}] 
\indindz{書式}{原稿の}%
\zindind{原稿}{の書式}%
\zindind{クラス}{ファイル}%
\indindz{ファイル}{文書クラス}%
\indindz{ファイル}{ドキュメントクラス}%
  原稿の\Z{書式}を決定するファイル．
  \KY{クラス}，\K{クラスファイル}，\K{文書クラスファイル}，%
  \zindind{ドキュメントクラス}{オプション}%
  \K{ドキュメントクラスファイル}とも言う．
\item[\Exten{clo}] 
  クラスのオプションに応じた設定を記述したファイル．
\item[\Exten{fd}]  
  \zindind{書体}{の属性}%
  書体の属性を定義したファイル．ユーザが意識して使うことはない．
\end{namelist}

原稿を作成するときに見かけるものは以下の通りです．
\begin{namelist}{xxxx}
\item[\Exten{tex}] 
  {\LaTeX}が処理を受け付ける原稿．\KY{ソース}，\KY{ソースファイル}とも言う．
\item[\Exten{bib}] 
  文献成形プログラム{\BibTeX}が処理できる参考文献ファイル．
  \K{参考文献データベース}と言う．
\item[\Exten{bst}] 
  参考文献の表示形式を決めるもの．\K{参考文献スタイル}と言う．
  \indindz{スタイル}{参考文献}%
\item[\Exten{eps}] 
 Adobe社が開発したページ記述言語{\PS}で書かれたファイル．
 \zindind{画像}{ベクトル}%
 主に単一ページのベクトル画像などに使われる．\zindind{ページ}{記述言語}
\item[\Exten{ist}] 
 索引の書式を決めるファイル．\K{索引スタイル}と言う．\indindz{スタイル}{索引}%

\end{namelist}

原稿をタイプセットした後に見かけるものは以下の通りです．
これらは全て中途ファイルであり，{\LaTeX}が原稿を完成させるた
めに必要なものです．
\begin{namelist}{xxxx}
\item[\Exten{log}] {\LaTeX}の組版結果の詳細情報．
		    \KY{ログファイル}と言う．
\item[\Exten{aux}] 相互参照などの情報が書かれたファイル．
		    1度目以降の処理に必要とされる．
\item[\Exten{dvi}] 原稿を{\LaTeX}でタイプセットした後に作成される
		    印刷結果に限りなく近いファイル．このファイルを
		    プレビューしたり，または他の{デバイスドライバ}%
		    によって別の形式に変換できる．
\item[\Exten{toc}] \zindind{目次}{用の中途ファイル}
    \yo{目次}を出力するための目次情報が書き出されたファイル．
\item[\Exten{lof}] 
    \yo{図目次}を出力するための図目次情報が書き出されたファイル．
\item[\Exten{lot}] 
    \yo{表目次}を出力するための表目次情報が書き出されたファイル．
\item[\Exten{bbl}] {\BibTeX}によって並べ替えをした後の
    参考文献リスト．\Env{thebibliography}環境を用いて記述されている．
\item[\Exten{blg}] {\BibTeX}の実行結果が出力されるログファイル．
\item[\Exten{idx}] 並べ替えられる前の索引の語句が書き出されたファイル．
    \Prog{MakeIndex}，\Prog{mendex}などの
    プログラムで並べ替えをする．
\item[\Exten{ind}] \prog{makeindex}などによって
    並べ替えられた索引ファイル．標準的には\Env{theindex}
    環境を用いて記述されている．
\item[\Exten{ilg}] \prog{makeindex}などを実行したときの処理結果が
   出力されるログファイル．
\end{namelist}

その他画像形式に関わる拡張子として，主に以下のものがあります．
\indindz{画像}{フルカラー}%
\indindz{画像}{無圧縮}%
\indindz{画像}{可逆圧縮}%
\indindz{ビットマップ画像}{フルカラー}%
\indindz{ビットマップ画像}{無圧縮}%
\indindz{ビットマップ画像}{可逆圧縮}%
\begin{namelist}{jpeg}
\item[\Exten{jpg}] 
  写真などのフルカラーに適したビットマップ画像．
\item[\Exten{bmp}] 
  Windows 標準の無圧縮ビットマップ画像．
\item[\Exten{png}]
  可逆圧縮で\prog{\Dvipdfm}が標準で対応しているビットマップ画像．
\item[\Exten{bb}]
  \LaTeX が画像のバウンディングボックス情報を得るために必要とする
  ファイル．\Prog{ebb}や\Prog{CreateBB}で作成できる．
\item[\Exten{mp}] 
  \Prog[MetaPost]{\MP}で描画された\Z{ベクトル画像}．
\end{namelist}


\section{コマンドの基本}
{\LaTeX}では便利なコマンドがあらかじめ用意されています．
それらをどのように用いるか，また必要な機能がないときは
どうすれば良いのかを説明します．

\subsection{原稿の先頭でのコマンド}
\zindind{原稿}{のプリアンブル}%

少し前置きが長くなりましたが{\LaTeX}の原稿の構造をもう一度
見ておきましょう．
\begin{Syntax}
\cmd{documentclass}\opa{オプション,\,$\ldots$}%
	\pa{クラス}\opa{リリース}\\
\va{前書き部分} (プリアンブルコマンド)\\
\verb|\begin{document}|\\
\va{本文} (ボディ)\\
\verb|\end{document}|
\end{Syntax}
\zindind{原稿}{の先頭}%%
さて，原稿の先頭部分，\cmd{documentclass}が始まる前の
イニシャルコマンドには\Env{filecontents}環境が使えます．
\begin{Syntax}
\verb|\begin{filecontents}|\pa{ファイル名}\\
\va{内容}\\
\verb|\end{filecontents}|
\end{Syntax}
この\env{filecontents}環境が持つ機能ですが，指定した
\va{ファイル名}に\va{内容}を書き出してくれます．
例えば原稿を一つのファイルとしてしか配布できない場合に
EPS画像などを同時に含めるならば，この部分にEPS画像の
ソースを記述します．ただしこの環境は書き出すファイル
の先頭にコメントを挿入しますので，アスタリスク\qu{\str*}を
付けると自動的に付加される余分なコメントが入りません．

\begin{InTeX}
\begin{filecontents*}{<ファイル名>}
%!PS-Adobe-2.0なんとかかんとか...
\end{filecontents*}
\end{InTeX}


\subsection{プリアンブルでのコマンド}
原稿の先頭には\env{filecontents}環境が使えることは分かりました．次に書く
べきコマンドは \C{documentclass} 命令です．
\begin{Syntax}
\cmd{documentclass}\opa{オプション,\,$\ldots$}\pa{クラス名}\opa{リリース}
\end{Syntax}
この命令は\yo{これから文書で使う命令の定義や前書きを
書きます}という意味合いを持っており，
この命令を書いた後は原稿の\Z{前書き部分}
\pp{\Z{プリアンブル}}として解釈されます．

\va{クラス名}には\secref{01pregame:sec:classes}で
紹介するものが使えます．\va{オプション}にはそれぞれの
クラスが用意している任意引数を渡すことができます．
このオプションのことを特に\K{文書クラスオプション}とか%
\zindind{ドキュメントクラス}{オプション}%
\zindind{文書クラス}{オプション}%
\K{ドキュメントクラスオプション}と言います．
\va{リリース}には自分の使っているクラスファイルが
いつ配布されたのかを書きます．

\va{リリース}にはクラスの配布された日付を\va{YYYY/MM/DD}
という書式で記述できます．例えば，2003年12月31日に公開された
日本語のクラス\Cls{jarticle}ならばおおむね以下のようになります．

\begin{InTeX}
\documentclass[11pt,a4j]{jarticle}[2003/12/31]
\end{InTeX}

もしも，クラスファイルが2003年12月31日以前のもので
要求されているバージョンよりも古ければ，
{\LaTeX}はタイプセット時に次のような\Z{警告}\pp{\Z{warning}}を出します．

\index{You have requested, on input line n@\texttt{You have requested, on input line n}}%
\index{警告!You have requested, on input line n@\texttt{You have requested, on input line n}}%
\begin{OutTerm}
LaTeX Warning: You have requested, on input line 1, version
               `2003/12/31' of document class jarticle,
               but only version
               `2002/04/09 v1.4 Standard pLaTeX class'
               is available.
\end{OutTerm}

他にも\secref{01pregame:sec:stdmacro}で紹介しているような
パッケージを使う場合はプリアンブル部分に \Cmd{usepackage} を
使います．
\begin{Syntax}
\cmd{usepackage}\opa{オプション,\,$\ldots$}%
 \pa{パッケージ名}\opa{リリース}
\end{Syntax}
これはプリアンブルのみでしか使えません．
\cmd{usepackage}命令は \cmd{documentclass}命令と同じように，
そのパッケージが提供するオプションを指定したり，リリースには
そのパッケージのバージョンを指定できます．
\zindind{デバイス}{ドライバ}%
例えば，画像ファイルなどを{\LaTeX}で扱いたいと思い，
デバイスドライバとして\prog{\Dvipdfmx}を使う場合は
次のように\str{graphicx}パッケージを使うことを\K{プリアンブルで}
宣言します．

\begin{InTeX}
\usepackage[dvipdfmx]{graphicx}[2001/01/01]
\end{InTeX}

同じパッケージを2度や3度以上読み込もうとしても，
1度読み込まれているなら再度読み込もうとしません．
パッケージに渡すオプション\pp{リリースを除く}を特に
\zindind{パッケージ}{オプション}\K{パッケージオプション}
と呼びます．

文書クラスオプションやパッケージオプションのいずれにしても，
たいてい\yo{命令}と\yo{必須引数}のあいだの\va{オプション}\pp{任意引数}
は\K{複数個渡すことができます}．

\begin{InTeX}
\documentclass[10pt,a4paper,twocolumn]{article}
\end{InTeX}

例えば\option{10pt}，\option{a4paper}，\option{twocolumn}と
いう三つのオプションは\Z{コンマ}\qu{\str,}を区切りとして書けば良いのです．

同時に複数のパッケージを使うことも宣言できます．
\sty{graphicx}，\sty{amsmath}，\sty{makeidx}などを
次のように宣言できますが，そうするとパッケージオプションをそれぞれのパッ
ケージに対して渡すことはできません．

\begin{InTeX}
\usepackage{graphicx,amsmath,makeidx}
\end{InTeX}

基本的なソースファイルの構成は次のようになります．

\begin{InTeX}
\documentclass[a4j]{jarticle} 
\usepackage[dvipdfmx]{graphicx}
\usepackage[dvipdfmx,usenames]{color}
\begin{document}
ここに文章を記述します．
\end{document}
\end{InTeX}

\begin{Trick}
 後述のデバイスドライバの指定に関しては，上記のような
 記述ではなく，ドキュメントクラスオプションに，使用する
 デバイスドライバを追加するのが安全です．

\begin{InText}
\documentclass[dvipdfmx,a4j]{jarticle} 
\usepackage{graphicx}
\usepackage[usenames]{color}
\end{InText}

これによりドキュメントクラスオプションが\KY{グローバルオプション}
としての機能を果たし，\cmd{usepackage}で読み込まれるマクロパッケージ
全てに渡される事になります．
\end{Trick}


{\LaTeX}処理を実行した原稿のプリアンブルに以下を記述します．

\begin{Syntax}
\cmd{listfiles}
\end{Syntax}

\Cmd{listfiles}命令を記述すれば，自分が処理している
原稿に何のファイルが使用されているのかを端末と
\Va{file}{log}に書き出します．

\begin{Prob}
実際に以下のファイル\Fl{listfile.tex}を作成，タイプセットしてください．

\begin{InTeX}
\documentclass{jbook}
\listfiles
\begin{document}
 test 
\end{document}
\end{InTeX}

%\prog{platex}でタイプセットしたならば次のような表示が出るでしょう．

%\begin{OutTerm}
%This is pTeX  Version 3.141592-p3.1.2 (sjis)(Web2C 7.5.2) 
% *File List*
%  pldefs.ltx    2000/07/13 v1.2 pLaTeX Kernel
%   jy1mc.fd    1997/01/24 v1.3 KANJI font defines
%   jy1gt.fd    1997/01/24 v1.3 KANJI font defines
% kinsoku.tex
% plpatch.ltx
%   jbook.cls    2001/10/04 v1.3 Standard pLaTeX class
%   jbk10.clo    2001/10/04 v1.3 Standard pLaTeX file
% ***********
%Output written on listfile.dvi (1 page，216 bytes).
%Transcript written on listfile.log.
%\end{OutTerm}
\begin{comment}
\begin{OutTerm}
This is pTeX, Version 3.14159-p3.1.5 (euc) (Web2C 7.4.5)
(./filetest.tex
pLaTeX2e <2005/01/04>+0 (based on LaTeX2e <2001/06/01> patch level 0)
(/usr/local/share/texmf/ptex/platex/base/jarticle.cls
Document Class: jarticle 2002/04/09 v1.4 Standard pLaTeX class
(/usr/local/share/texmf/ptex/platex/base/jsize10.clo)) 
(./filetest.aux) [1] (./filetest.aux)

 *File List*
  pldefs.ltx    2000/07/13 v1.2 pLaTeX Kernel (Default settings)
   jy1mc.fd    1997/01/24 v1.3 KANJI font defines
   jy1gt.fd    1997/01/24 v1.3 KANJI font defines
   jt1mc.fd    1997/01/24 v1.3 KANJI font defines
   jt1gt.fd    1997/01/24 v1.3 KANJI font defines
 kinsoku.tex
 plpatch.ltx
jarticle.cls    2002/04/09 v1.4 Standard pLaTeX class
 jsize10.clo    2002/04/09 v1.4 Standard pLaTeX file (size option)
 ***********

)
Output written on filetest.dvi (1 page, 216 bytes).
Transcript written on filetest.log.
\end{OutTerm}
\end{comment} 

出力結果からどのような事が分かるでしょうか．
ここで少し疑問に思っていただきたいことは，\yo{原稿には\Cls{jbook}を使う
ことしか宣言していないのに何か別のファイルも一緒に読み込まれている}と
いうことです．この例では\Fl{pldefs.ltx}をはじめとして，\Fl{kinsoku.tex}
や\Fl{jsize10.clo}等のファイルが読み込まれています．
\end{Prob}


\section{執筆環境における基本}\seclab{basic:lakulaku}
\zindind{原稿}{作成の支援}%

\TeX はテキストエディッタによって原稿を執筆するという方法を取るため，何ら
かの執筆環境を必要とします．それらの執筆環境の中には作業の簡略化を目的と
したものも数多くあります．
\TeX における伝統的な (\Z{obsolete}) \Z{執筆環境}には次のようなものが
挙げられます．
\begin{description}
 \item[\unixos] 
 \TeX とその周辺のプログラムを活用しようと思えば，\unixos
 を使うと（人によっては）快適な執筆環境を得る事ができます．\Prog{Vine Linux}は特に \TeX 周辺
 の日本語環境が整っていると思われます\footnote\webVineLinux ．
 \item[\Prog{Emacs}] 
 \LaTeX の原稿となるソースファイルを編集する時に役に立つテキストエディッタです．
 \item[{\Prog[yatex]\YaTeX}]
 上記Emacs上で動作する\Hito{広瀬}{雄二}\footnote\webYaTeX による \LaTeX
 執筆支援システムです．
 \item[\Prog{Tgif}] 
 \zindind{画像}{編集}%
 \unixos で広く使われているベクター画像編集プログラムです．
  \item[\Prog{Gnuplot}] 
 \unixos で広く使われているグラフを描画したり，データをプロットするため
 のプログラムです．
 \item[\Prog{Make}]
  \zindind{原稿}{の再コンパイル}%
  原稿の再コンパイルを支援するためのプログラムです．\Fl{Makefile}とい
  う特別なファイルを用意する事で，再コンパイルにおける手間を軽減する事に
  なります．
\end{description}

環境に依存してはいるものの，以下に挙げるように \LaTeX での煩雑な作業を軽
減できる有益な原稿執筆支援環境が数多く存在します．
\begin{description}
\zindind{Windows}{の執筆支援環境}%
% \item[\Prog{WinShell} (Windows)]
% \Person{Ingo H. de}{Boer}らによる統合執筆支援環境です\footnote
% \webWinShell ．コマンドラインから
% の煩雑な操作なしにタイプセット等ができるようになります．
 \item[{\Prog[EasyTeX]{Easy\TeX}}] \Hito{中川}{仁}によるWindows用の執
 筆支援環境です\footnote\webEasyTeX ．
 \LaTeX に慣れないうちはEasy\TeX を使うのが望ましいでしょう．
 導入方法や操作方法に関しては\Hito{大友}{康寛}による解説%
 \footnote{\url{http://www.klavis.info/etexinst.html}}や
 \TeX~Wiki\footnote{\url{http://cise.edu.mie-u.ac.jp/~okumura/texwiki/?EasyTeX}}%
 等を参照してください．


\zindind{Mac OS X}{の執筆支援環境}%
 \item[{\Prog[TeXShop]{\TeX Shop}}] 
  Mac~OS~X で使用できる\Person{Richard}{Koch}らによる執筆支援環境で
  す\footnote{\webTeXShop}．PDF でのプレビューが可能でディスプレイにおけ
  る表示がきれいです．
\end{description}

基本的にフリーウェアで済ませたいので，上記のような選択肢になる人も
多い事でしょう．Easy\TeX や \TeX Shop ではコマンドの入力を補完
したり，プログラムの実行等も簡単にできる環境が整備されています．
まず最初はこのようなプログラムを使った執筆の方が負荷も少ないと思われます．

もちろん，シェアウェアの方がサポートもありますし，バージョンアップも確実
な部分があると思います．いずれにしてもその人にとって適切だと思われるツー
ルは多少なりとも異なると思われますので，いくつか試用してみてください．

\input{05output}%     出力形式

